# Kubernetes Secret for GHES Auth Application
# IMPORTANT: DO NOT commit this file with real values to version control!
# 
# Usage:
# 1. Replace all placeholder values below with your actual configuration
# 2. Apply: oc apply -f secret.yml
# 3. Or use the interactive script: ./create-secrets.sh (recommended)
#
# To generate secure random keys:
# JWT_SECRET: openssl rand -base64 32
# ENCRYPTION_KEY: openssl rand -hex 32

apiVersion: v1
kind: Secret
metadata:
  name: ghes-auth-secrets
type: Opaque
stringData:
  # Route host - The public hostname where the app will be accessible
  # Example: auth.mydomain.example or auth.github.adib.co.ae
  host_route_host: "REPLACE_WITH_YOUR_ROUTE_HOST"
  
  # GitHub Enterprise API base URL
  # Example: https://github.adib.co.ae/api/v3
  gh_base_url: "https://github.adib.co.ae/api/v3"
  
  # GitHub OAuth App Client ID
  # Get this from GitHub: Settings > Developer settings > OAuth Apps
  # Example: Iv1.1234567890abcdef
  gh_client_id: "REPLACE_WITH_YOUR_CLIENT_ID"
  
  # GitHub OAuth App Client Secret
  # Get this from GitHub: Settings > Developer settings > OAuth Apps
  # Example: ghp_xxxxxxxxxxxxxxxxxxxx
  gh_client_secret: "REPLACE_WITH_YOUR_CLIENT_SECRET"
  
  # GitHub Pages URL - Full URL to the GitHub Pages site
  # Example: https://github.adib.co.ae/pages/myorg/myrepo
  gh_pages_url: "https://github.adib.co.ae/pages/REPLACE_ORG/REPLACE_REPO"
  
  # GitHub Organization name
  # The organization that contains the team for authorization
  # Example: myorg or ADIB
  org_name: "REPLACE_WITH_YOUR_ORG"
  
  # GitHub Team slug for authorization
  # Only members of this team can access the application
  # Example: devops or admin
  team_slug: "REPLACE_WITH_YOUR_TEAM_SLUG"
  
  # JWT Secret - Used for signing session tokens (15 min expiry)
  # Generate: openssl rand -base64 32
  # IMPORTANT: Keep this secret and unique per environment
  jwt_secret: "REPLACE_WITH_GENERATED_JWT_SECRET"
  
  # Encryption Key - 32-byte hex string for AES-256-GCM encryption
  # Generate: openssl rand -hex 32
  # IMPORTANT: This encrypts all user-submitted secret values in gists
  # If you lose this key, encrypted values cannot be decrypted!
  encryption_key: "REPLACE_WITH_GENERATED_ENCRYPTION_KEY"
  
  # Gist Filename - Specific filename within the gist to read/modify
  # Optional: If not specified, the first file in the gist will be used
  # Example: variables.json or config.json
  gist_filename: "REPLACE_WITH_GIST_FILENAME_OR_LEAVE_EMPTY"

---
# Certificate Authority certificate for GHES (if using self-signed certs)
# To create from a PEM file:
# oc create secret generic ghes-ca-cert --from-file=gh_ca.pem=/path/to/your/ca.pem

apiVersion: v1
kind: Secret
metadata:
  name: ghes-ca-cert
type: Opaque
data:
  # Base64 encoded CA certificate
  # Example: base64 -w 0 /path/to/ca.pem
  gh_ca.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY205bGRHVnpNQjRYRFRJeU1ERXdNVEF3TURBd01Gb1hEVE15TURFd01UQXdNREF3TUZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTHlvCg==

